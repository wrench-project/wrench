

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Creating a simple storage service &mdash; WRENCH 2.8-dev documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8b628ae0" />

  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=14e8207d"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/wrench-dark-theme-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quickstart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installing WRENCH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../simulation_101.html">Simulation 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wrench_101.html">WRENCH 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wrench_102.html">WRENCH 102</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_user.html">WRENCH User C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_developer.html">WRENCH Developer C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_internal.html">WRENCH Internal C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api.html">WRENCH REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api.html">WRENCH Python API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WRENCH</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Creating a simple storage service</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/wrench_101/simplestorage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-a-simple-storage-service">
<span id="guide-101-simplestorage"></span><h1>Creating a simple storage service<a class="headerlink" href="#creating-a-simple-storage-service" title="Link to this heading"></a></h1>
</section>
<section id="overview">
<span id="guide-simplestorage-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<p>A Simple storage service is the simplest possible abstraction for a
service that can store and provide access to workflow files. It has a
certain storage capacity, and provides write, read, and delete
operations on files. In addition, higher-level semantics such as copying
a file directly from a storage service to another are provided.</p>
</section>
<section id="guide-simplestorage-creating">
<span id="id1"></span><h1>Creating a Simple storage service<a class="headerlink" href="#guide-simplestorage-creating" title="Link to this heading"></a></h1>
<p>In WRENCH, a Simple storage service represents a storage service
(<a class="reference internal" href="../api_developer/classwrench_1_1_storage_service.html#_CPPv4N6wrench14StorageServiceE" title="wrench::StorageService"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::StorageService</span></code></a>), which is defined by the
<a class="reference internal" href="../api_developer/classwrench_1_1_simple_storage_service.html#_CPPv4N6wrench20SimpleStorageServiceE" title="wrench::SimpleStorageService"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::SimpleStorageService</span></code></a> class. An instantiation of a Simple storage
service requires the following parameters:</p>
<ul class="simple">
<li><p>The name of a host on which to start the service;</p></li>
<li><p>A list of mount points (corresponding to disks attached to the host);
and</p></li>
<li><p>Maps (<code class="docutils literal notranslate"><span class="pre">std::map</span></code>) of configurable properties
(<a class="reference internal" href="../api_developer/classwrench_1_1_simple_storage_service_property.html#_CPPv4N6wrench28SimpleStorageServicePropertyE" title="wrench::SimpleStorageServiceProperty"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::SimpleStorageServiceProperty</span></code></a>) and configurable message
payloads (<a class="reference internal" href="../api_developer/classwrench_1_1_simple_storage_service_message_payload.html#_CPPv4N6wrench34SimpleStorageServiceMessagePayloadE" title="wrench::SimpleStorageServiceMessagePayload"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::SimpleStorageServiceMessagePayload</span></code></a>).</p></li>
</ul>
<p>The example below creates an instance of a Simple storage service that
runs on host <code class="docutils literal notranslate"><span class="pre">BigDisk</span></code>, has access to the disks mounted at paths
<code class="docutils literal notranslate"><span class="pre">/data/</span></code> and <code class="docutils literal notranslate"><span class="pre">/home/</span></code> at host <code class="docutils literal notranslate"><span class="pre">BigDisk</span></code>. Furthermore, the number
of maximum concurrent data connections supported by the service is
configured to be 8, and the message sent to the service to find out its
free space is configured to be 1KiB:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">auto</span><span class="w"> </span><span class="n">storage_service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulation</span><span class="o">-&gt;</span><span class="n">add</span><span class="p">(</span>
<span class="w">      </span><span class="n">wrench</span><span class="o">::</span><span class="n">SimpleStorageService</span><span class="o">::</span><span class="n">createSimpleStorageService</span><span class="p">(</span><span class="s">&quot;BigDisk&quot;</span><span class="p">,</span>
<span class="w">                                      </span><span class="p">{</span><span class="s">&quot;/data/&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/home/&quot;</span><span class="p">},</span>
<span class="w">                                      </span><span class="p">{{</span><span class="n">wrench</span><span class="o">::</span><span class="n">SimpleStorageServiceProperty</span><span class="o">::</span><span class="n">MAX_NUM_CONCURRENT_DATA_CONNECTIONS</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;8&quot;</span><span class="p">}},</span>
<span class="w">                                      </span><span class="p">{{</span><span class="n">wrench</span><span class="o">::</span><span class="n">SimpleStorageServiceMessagePayload</span><span class="o">::</span><span class="n">FREE_SPACE_REQUEST_MESSAGE_PAYLOAD</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">}}));</span>
</pre></div>
</div>
<p>See the documentation of <a class="reference internal" href="../api_developer/classwrench_1_1_simple_storage_service_property.html#_CPPv4N6wrench28SimpleStorageServicePropertyE" title="wrench::SimpleStorageServiceProperty"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::SimpleStorageServiceProperty</span></code></a> and
<a class="reference internal" href="../api_developer/classwrench_1_1_simple_storage_service_message_payload.html#_CPPv4N6wrench34SimpleStorageServiceMessagePayloadE" title="wrench::SimpleStorageServiceMessagePayload"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">wrench::SimpleStorageServiceMessagePayload</span></code></a> for all possible
configuration options.</p>
<p>Also see the simulators in the <code class="docutils literal notranslate"><span class="pre">examples/workflow_api/basic-examples/*</span></code> and
<code class="docutils literal notranslate"><span class="pre">examples/action_api/*</span></code>
directories, which all use simple storage services.</p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2022, WRENCH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>